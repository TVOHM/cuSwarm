<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3"/>
<title>cuSwarm: calculate_steering Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">cuSwarm
   &#160;<span id="projectnumber">3.11</span>
   </div>
   <div id="projectbrief">Large scale flocking agent library using NVIDIA CUDA</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="structcalculate__steering-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">calculate_steering Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A functor used to calculate the boids new acceleration using the GPU.  
 <a href="structcalculate__steering.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad41d8b7a1c460b4f83bc75390f350e5c"><td class="memItemLeft" align="right" valign="top">__host__ __device__&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcalculate__steering.html#ad41d8b7a1c460b4f83bc75390f350e5c">calculate_steering</a> (float4 *position_data, float4 *velocity_data, int *cell_size_data, <a class="el" href="structconfig.html">config</a> <a class="el" href="structconfig.html">config</a>)</td></tr>
<tr class="memdesc:ad41d8b7a1c460b4f83bc75390f350e5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new <a class="el" href="structcalculate__steering.html" title="A functor used to calculate the boids new acceleration using the GPU.">calculate_steering</a> struct for this frame.  <a href="#ad41d8b7a1c460b4f83bc75390f350e5c"></a><br/></td></tr>
<tr class="separator:ad41d8b7a1c460b4f83bc75390f350e5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2688fa4c9750d9e17b43f513e80d9c58"><td class="memItemLeft" align="right" valign="top">__host__ __device__ float4&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcalculate__steering.html#a2688fa4c9750d9e17b43f513e80d9c58">operator()</a> (thrust::tuple&lt; int, float4, float4 &gt; input)</td></tr>
<tr class="memdesc:a2688fa4c9750d9e17b43f513e80d9c58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the steering of each boid on the GPU.  <a href="#a2688fa4c9750d9e17b43f513e80d9c58"></a><br/></td></tr>
<tr class="separator:a2688fa4c9750d9e17b43f513e80d9c58"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ad11957e2614059f675d574eeb14507a5"><td class="memItemLeft" align="right" valign="top">__host__ __device__ void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcalculate__steering.html#ad11957e2614059f675d574eeb14507a5">queryNeighbours</a> (const int &amp;boid_index, const float4 &amp;position, const float4 &amp;velocity, int &amp;num_alignment, float4 &amp;alignment, int &amp;num_cohesion, float4 &amp;cohesion, float4 &amp;separation)</td></tr>
<tr class="memdesc:ad11957e2614059f675d574eeb14507a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates cells to search and then queries all boids in cells to see which should be applied for which behaviour to this boid.  <a href="#ad11957e2614059f675d574eeb14507a5"></a><br/></td></tr>
<tr class="separator:ad11957e2614059f675d574eeb14507a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9035fa78127f43f30038dca0efceccab"><td class="memItemLeft" align="right" valign="top">__host__ __device__ int4&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcalculate__steering.html#a9035fa78127f43f30038dca0efceccab">calculateCell</a> (const float4 &amp;position)</td></tr>
<tr class="memdesc:a9035fa78127f43f30038dca0efceccab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the cell index of the cell that this boid is contained in based on its position.  <a href="#a9035fa78127f43f30038dca0efceccab"></a><br/></td></tr>
<tr class="separator:a9035fa78127f43f30038dca0efceccab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe0ece46a6602dd17a81547ac4660100"><td class="memItemLeft" align="right" valign="top">__host__ __device__ float4&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcalculate__steering.html#abe0ece46a6602dd17a81547ac4660100">calculateAcceleration</a> (const float4 &amp;alignment, const float4 &amp;cohesion, const float4 &amp;separation)</td></tr>
<tr class="memdesc:abe0ece46a6602dd17a81547ac4660100"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the new acceleration based upon the sum of the 3 steering behaviours.  <a href="#abe0ece46a6602dd17a81547ac4660100"></a><br/></td></tr>
<tr class="separator:abe0ece46a6602dd17a81547ac4660100"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4126856e89ca514929c69ae0e1c2c32c"><td class="memItemLeft" align="right" valign="top">__host__ __device__ float4&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcalculate__steering.html#a4126856e89ca514929c69ae0e1c2c32c">calculateCohesion</a> (float4 cohesion, const int &amp;num_cohesion, const float4 &amp;position)</td></tr>
<tr class="memdesc:a4126856e89ca514929c69ae0e1c2c32c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the cohesion behaviour.  <a href="#a4126856e89ca514929c69ae0e1c2c32c"></a><br/></td></tr>
<tr class="separator:a4126856e89ca514929c69ae0e1c2c32c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8434406d6d3b4ea088bbc133a8ad052"><td class="memItemLeft" align="right" valign="top">__host__ __device__ float4&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcalculate__steering.html#ab8434406d6d3b4ea088bbc133a8ad052">calculateAlignment</a> (float4 alignment, const int &amp;num_alignment, const float4 &amp;velocity)</td></tr>
<tr class="memdesc:ab8434406d6d3b4ea088bbc133a8ad052"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the alignment behaviour.  <a href="#ab8434406d6d3b4ea088bbc133a8ad052"></a><br/></td></tr>
<tr class="separator:ab8434406d6d3b4ea088bbc133a8ad052"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:adbec580ab7f549f13cfaffa1c1b18b04"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structconfig.html">config</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcalculate__steering.html#adbec580ab7f549f13cfaffa1c1b18b04">cfg</a></td></tr>
<tr class="memdesc:adbec580ab7f549f13cfaffa1c1b18b04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simulation configuration data.  <a href="#adbec580ab7f549f13cfaffa1c1b18b04"></a><br/></td></tr>
<tr class="separator:adbec580ab7f549f13cfaffa1c1b18b04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6399f357551191c3e9c5c67b104a86d"><td class="memItemLeft" align="right" valign="top">float4 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcalculate__steering.html#ab6399f357551191c3e9c5c67b104a86d">positions</a></td></tr>
<tr class="memdesc:ab6399f357551191c3e9c5c67b104a86d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to position data of all boids.  <a href="#ab6399f357551191c3e9c5c67b104a86d"></a><br/></td></tr>
<tr class="separator:ab6399f357551191c3e9c5c67b104a86d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a3fc8fe2a10bd5e0812726e7c4340ce"><td class="memItemLeft" align="right" valign="top">float4 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcalculate__steering.html#a3a3fc8fe2a10bd5e0812726e7c4340ce">velocities</a></td></tr>
<tr class="memdesc:a3a3fc8fe2a10bd5e0812726e7c4340ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to velocity data of all boids.  <a href="#a3a3fc8fe2a10bd5e0812726e7c4340ce"></a><br/></td></tr>
<tr class="separator:a3a3fc8fe2a10bd5e0812726e7c4340ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b89283f2e453e66ae07bf40c82a039c"><td class="memItemLeft" align="right" valign="top">int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcalculate__steering.html#a7b89283f2e453e66ae07bf40c82a039c">cell_sizes</a></td></tr>
<tr class="memdesc:a7b89283f2e453e66ae07bf40c82a039c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to number of boids in each cell data.  <a href="#a7b89283f2e453e66ae07bf40c82a039c"></a><br/></td></tr>
<tr class="separator:a7b89283f2e453e66ae07bf40c82a039c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a4e59e2d1218963e3e0b7879a0ed06da8"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcalculate__steering.html#a4e59e2d1218963e3e0b7879a0ed06da8">test</a></td></tr>
<tr class="memdesc:a4e59e2d1218963e3e0b7879a0ed06da8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides private access to the test class for unit testing purposes.  <a href="#a4e59e2d1218963e3e0b7879a0ed06da8"></a><br/></td></tr>
<tr class="separator:a4e59e2d1218963e3e0b7879a0ed06da8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A functor used to calculate the boids new acceleration using the GPU. </p>
<p>Called using a thrust functor and executed on the GPU for each boid. Updates the acceleration (steering) of a boid by looking at its nearby neighbours. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ad41d8b7a1c460b4f83bc75390f350e5c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">__host__ __device__ calculate_steering::calculate_steering </td>
          <td>(</td>
          <td class="paramtype">float4 *&#160;</td>
          <td class="paramname"><em>position_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float4 *&#160;</td>
          <td class="paramname"><em>velocity_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>cell_size_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structconfig.html">config</a>&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a new <a class="el" href="structcalculate__steering.html" title="A functor used to calculate the boids new acceleration using the GPU.">calculate_steering</a> struct for this frame. </p>
<p>Stores pointers to the global position, velocity and cell data as well as creating a copy of the simulation config. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">position_data</td><td>Pointer to the (stored on GPU) list of all boid positions </td></tr>
    <tr><td class="paramname">velocity_data</td><td>Pointer to the (stored on GPU) list of all boid velocities </td></tr>
    <tr><td class="paramname">cell_size_data</td><td>Pointer to the (stored on GPU) list of the number of boids in each of the simulations cells </td></tr>
    <tr><td class="paramname">config</td><td>The simulation configuration data </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="abe0ece46a6602dd17a81547ac4660100"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">__host__ __device__ float4 calculate_steering::calculateAcceleration </td>
          <td>(</td>
          <td class="paramtype">const float4 &amp;&#160;</td>
          <td class="paramname"><em>alignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float4 &amp;&#160;</td>
          <td class="paramname"><em>cohesion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float4 &amp;&#160;</td>
          <td class="paramname"><em>separation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates the new acceleration based upon the sum of the 3 steering behaviours. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alignment</td><td>Alignment steering behaviour </td></tr>
    <tr><td class="paramname">cohesion</td><td>Cohesion steering behaviour </td></tr>
    <tr><td class="paramname">separation</td><td>Separation steering behaviour </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new acceleration </dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>Caps the new acceleration based on the maximum force configuration </dd></dl>

</div>
</div>
<a class="anchor" id="ab8434406d6d3b4ea088bbc133a8ad052"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">__host__ __device__ float4 calculate_steering::calculateAlignment </td>
          <td>(</td>
          <td class="paramtype">float4&#160;</td>
          <td class="paramname"><em>alignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int &amp;&#160;</td>
          <td class="paramname"><em>num_alignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float4 &amp;&#160;</td>
          <td class="paramname"><em>velocity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates the alignment behaviour. </p>
<p>This method finds the average velocity of all the boids found within the radius. It will then work out the difference between the boid's actual velocity and its target velocity, giving us the difference. alignment_weight is then used to describe how much of that difference we will apply </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alignment</td><td>The sum of all the velocities of the agents found within the alignment radius </td></tr>
    <tr><td class="paramname">num_alignment</td><td>Number of neighbouring boids that were within the alignment radius </td></tr>
    <tr><td class="paramname">velocity</td><td>Velocity of the boid </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The calculated alignment steering behaviour </dd></dl>

</div>
</div>
<a class="anchor" id="a9035fa78127f43f30038dca0efceccab"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">__host__ __device__ int4 calculate_steering::calculateCell </td>
          <td>(</td>
          <td class="paramtype">const float4 &amp;&#160;</td>
          <td class="paramname"><em>position</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates the cell index of the cell that this boid is contained in based on its position. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">position</td><td>Position of the boid </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The x,y,z of the cell </dd></dl>

</div>
</div>
<a class="anchor" id="a4126856e89ca514929c69ae0e1c2c32c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">__host__ __device__ float4 calculate_steering::calculateCohesion </td>
          <td>(</td>
          <td class="paramtype">float4&#160;</td>
          <td class="paramname"><em>cohesion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int &amp;&#160;</td>
          <td class="paramname"><em>num_cohesion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float4 &amp;&#160;</td>
          <td class="paramname"><em>position</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates the cohesion behaviour. </p>
<p>This method finds the average position of all the boids found within the radius. It will then work out the difference between where the boid wants to go and where it is, giving us the difference. cohesion_weight is then used to describe how much of that distance we will travel </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cohesion</td><td>The sum of all the positions of the agents found within the cohesion radius </td></tr>
    <tr><td class="paramname">num_cohesion</td><td>Number of neighbouring boids that were within the cohesion radius </td></tr>
    <tr><td class="paramname">position</td><td>Position of the boid </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The calculated cohesion steering behaviour </dd></dl>

</div>
</div>
<a class="anchor" id="a2688fa4c9750d9e17b43f513e80d9c58"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">__host__ __device__ float4 calculate_steering::operator() </td>
          <td>(</td>
          <td class="paramtype">thrust::tuple&lt; int, float4, float4 &gt;&#160;</td>
          <td class="paramname"><em>input</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates the steering of each boid on the GPU. </p>
<p>Executed ON THE GPU within a thrust transform call for EACH BOID (or a subset of all boids, depending on skipthink settings) The boid knows which cell it is in, and knows the radius of the cells around it that it needs to search in. It then locates other boids in these cells that fall within its neighbourhood radius and applies Reynold's steering behaviours. Tuple input and ouput of functor ensures improved memory accesses due to memory coalescing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input</td><td>A tuple containing the position and velocity of the boid to update </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>float4 The new acceleration of the boid </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>Cell Min/Max operation may be further optimised </dd></dl>

</div>
</div>
<a class="anchor" id="ad11957e2614059f675d574eeb14507a5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">__host__ __device__ void calculate_steering::queryNeighbours </td>
          <td>(</td>
          <td class="paramtype">const int &amp;&#160;</td>
          <td class="paramname"><em>boid_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float4 &amp;&#160;</td>
          <td class="paramname"><em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float4 &amp;&#160;</td>
          <td class="paramname"><em>velocity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>num_alignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float4 &amp;&#160;</td>
          <td class="paramname"><em>alignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>num_cohesion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float4 &amp;&#160;</td>
          <td class="paramname"><em>cohesion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float4 &amp;&#160;</td>
          <td class="paramname"><em>separation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates cells to search and then queries all boids in cells to see which should be applied for which behaviour to this boid. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">boid_index</td><td>Index of the boid we are updating </td></tr>
    <tr><td class="paramname">position</td><td>Position of the boid we are updating </td></tr>
    <tr><td class="paramname">velocity</td><td>Velocity of the boid we are updating </td></tr>
    <tr><td class="paramname">num_alignment</td><td>Will be populated with the number of agents found within the alignment radius. Garaunteed to be 0 or greater. </td></tr>
    <tr><td class="paramname">alignment</td><td>Will be populated with the sum of all the velocities of the agents found within the alignment radius </td></tr>
    <tr><td class="paramname">num_cohesion</td><td>Will be populated with the number of agents found within the cohesion radius. Garaunteed to be 0 or greater. </td></tr>
    <tr><td class="paramname">cohesion</td><td>Will be populated with the sum of all the positions of the agents found within the cohesion radius </td></tr>
    <tr><td class="paramname">separation</td><td>Will be populated with the avoidance steering behaviours looking to avoid agents found within the separation radius </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="a4e59e2d1218963e3e0b7879a0ed06da8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classtest.html">test</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Provides private access to the test class for unit testing purposes. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a7b89283f2e453e66ae07bf40c82a039c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int* calculate_steering::cell_sizes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to number of boids in each cell data. </p>

</div>
</div>
<a class="anchor" id="adbec580ab7f549f13cfaffa1c1b18b04"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structconfig.html">config</a> calculate_steering::cfg</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Simulation configuration data. </p>

</div>
</div>
<a class="anchor" id="ab6399f357551191c3e9c5c67b104a86d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float4* calculate_steering::positions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to position data of all boids. </p>

</div>
</div>
<a class="anchor" id="a3a3fc8fe2a10bd5e0812726e7c4340ce"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float4* calculate_steering::velocities</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to velocity data of all boids. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>C:/Users/Ian/Documents/Visual Studio 2010/Projects/CudaBoids/CudaBoids/<a class="el" href="calculate__steering_8cuh.html">calculate_steering.cuh</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Mar 25 2013 23:35:47 for cuSwarm by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3
</small></address>
</body>
</html>
